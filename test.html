<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Select 2 Devices</title>
  <style>
    body {
      background: #eef2f5;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 40px;
      text-align: center;
    }
    h1 {
      margin-bottom: 30px;
    }
    .device-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      max-width: 900px;
      margin-inline: auto;
    }
    .device-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s, border 0.2s;
      border: 2px solid transparent;
    }
    .device-card:hover {
      transform: translateY(-5px);
    }
    .device-card.selected {
      border-color: #28a745;
      background: #e6f7ea;
    }
    .device-name {
      font-size: 20px;
      margin-bottom: 10px;
    }
    .device-status {
      font-size: 14px;
      padding: 5px 10px;
      border-radius: 12px;
      display: inline-block;
      margin-top: 5px;
    }
    .online {
      background: #d4edda;
      color: #155724;
    }
    .offline {
      background: #f8d7da;
      color: #721c24;
    }
    .start-button {
      padding: 12px 30px;
      font-size: 18px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s;
      opacity: 0.5;
      pointer-events: none;
    }
    .start-button.enabled {
      opacity: 1;
      pointer-events: auto;
    }
  </style>
</head>
<body>

<h1>Select 2 Raspberry Pis to Monitor</h1>

<div class="device-grid">
  <div class="device-card" data-device="RPI1" onclick="toggleSelect(this)">
    <div class="device-name">RPI1</div>
    <div class="device-status online">Online</div>
  </div>
  <div class="device-card" data-device="RPI2" onclick="toggleSelect(this)">
    <div class="device-name">RPI2</div>
    <div class="device-status online">Online</div>
  </div>
  <div class="device-card" data-device="RPI3" onclick="toggleSelect(this)">
    <div class="device-name">RPI3</div>
    <div class="device-status offline">Offline</div>
  </div>
</div>

<button id="startBtn" class="start-button" onclick="startMonitoring()">Start Monitoring</button>

<script>
  function toggleSelect(card) {
    if (card.classList.contains('selected')) {
      card.classList.remove('selected');
    } else {
      const selected = document.querySelectorAll('.device-card.selected');
      if (selected.length >= 2) {
        alert("You can only select 2 devices!");
        return;
      }
      card.classList.add('selected');
    }

    updateButtonState();
  }

  function updateButtonState() {
    const selectedCount = document.querySelectorAll('.device-card.selected').length;
    const startBtn = document.getElementById('startBtn');
    if (selectedCount === 2) {
      startBtn.classList.add('enabled');
    } else {
      startBtn.classList.remove('enabled');
    }
  }

  function startMonitoring() {
    const selectedDevices = Array.from(document.querySelectorAll('.device-card.selected'))
                                 .map(card => card.getAttribute('data-device'));

    if (selectedDevices.length !== 2) {
      alert("Please select exactly 2 devices.");
      return;
    }

    // Store the selected devices in localStorage
    localStorage.setItem('selectedDevices', JSON.stringify(selectedDevices));

    // Redirect based on the selected devices
    if (selectedDevices.includes("RPI1") && selectedDevices.includes("RPI2")) {
      window.location.href = "rpi1.html";
    } else if (selectedDevices.includes("RPI1") && selectedDevices.includes("RPI3")) {
      window.location.href = "monitor_rpi1_rpi3.html";
    } else if (selectedDevices.includes("RPI2") && selectedDevices.includes("RPI3")) {
      window.location.href = "monitor_rpi2_rpi3.html";
    } else {
      alert("Error: Invalid device selection.");
    }
  }
</script>

</body>
</html>
